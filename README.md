# Code Review MCP Server (Phase 5)

The repository now focuses exclusively on Phase 5: delivering a Model Context Protocol server that powers a practical code review assistant inside VS Code. Earlier phase experiments have been retired; the remaining code and docs exist to support this single goal.

## Current Objective

- Provide structured review guidance for staged changes by analysing git diffs, static signals, and project metadata.
- Surface actionable findings directly in VS Code via an MCP-compatible client.
- Offer repeatable workflows (checklists, regression risks, test gaps) that complement human reviewers instead of replacing them.

## Active Workstreams

- **Foundations:** Harden the TypeScript MCP server and expand the tool registry (code-review.collect-context shipped).
- **Data ingestion:** Collect file diffs, metadata, and repo context from the editor and git.
- **Analysis heuristics:** Build detectors for common review smells (missing tests, risky dependency changes, insecure patterns).
- **Feedback surfaces:** Format responses as structured notes that map cleanly to VS Code panels or inline comments.

## Local Development

```bash
npm install   # one-time dependency restore
npm run build # compile TypeScript to dist/
npm start     # launch the MCP server over stdio
```

When running inside VS Code, wire the server up via your preferred MCP client (e.g. the official extension or Bruno bridge) and stream JSON-RPC messages through stdio.

## Available Tooling

- `code-review.collect-context` — returns repository root, branch divergence, staged/unstaged breakdown, and optional recent commits to seed downstream review heuristics.
- `code-review.diff-insights` — summarises staged or working tree diffs, including churn metrics, rename tracking, and optional patch excerpts.

## Repository Layout

- `src/index.ts` – Phase 5 MCP server entry point (tools to be added incrementally).
- `dist/` – Compiled JavaScript output generated by `npm run build`.
- `MCP_LEARNING_GAMEPLAN.md` – Detailed roadmap for delivering the Phase 5 code review assistant.
